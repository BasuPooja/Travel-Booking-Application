{% extends 'base.html' %}

{% block page_title %}Travel Details{% endblock %}
{% block page_subtitle %}Review your trip information before booking{% endblock %}

{% block content %}
<div class="card shadow-sm">
  <div class="card-header bg-primary text-white">
    {{ travel.type }}: {{ travel.source }} → {{ travel.destination }}
  </div>
  <div class="card-body">
    <ul class="list-group mb-3">
      <li class="list-group-item"><strong>Date & Time:</strong> {{ travel.date_time }}</li>
      <li class="list-group-item"><strong>Price:</strong> ₹ {{ travel.price }}</li>
      <li class="list-group-item"><strong>Available Seats:</strong> {{ travel.available_seats }}</li>
    </ul>

    {% if user.is_authenticated %}
    <form method="post" action="{% url 'book_travel' travel.pk %}">
      {% csrf_token %}
      <div class="mb-3">
        <label for="seats" class="form-label">Number of Seats</label>
        <input id="seats" name="seats" type="number" min="1" max="{{ travel.available_seats }}" value="1" required class="form-control w-25">
      </div>
      <button class="btn btn-primary" {% if travel.available_seats == 0 %}disabled{% endif %}>
        Confirm Booking
      </button>
    </form>
    {% else %}
      <p><a href="{% url 'login' %}" class="btn btn-outline-primary">Login to Book</a></p>
    {% endif %}
  </div>
</div>
{% endblock %}
